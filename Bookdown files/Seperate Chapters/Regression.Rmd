
## Linear Regression

An example from Hays (1974, pp. 633-635):

"The teacher collected data for a class of 91 students, obtaining for each a score *X*, based on the number of courses in high-school mathematics, and a score *Y*, the actual score on the final examination for the course."

```{r echo = F}
regress.data <- data.frame(X = c(rep(2, 10), rep(2.5, 11), rep(3, 10), rep(3.5, 14), rep(4, 15), rep(4.5, 3), rep(5, 4),
                   rep(5.5, 3), rep(6, 6), rep(6.5, 4), rep(7, 3), rep(7.5, 4), rep(8, 4)),
           Y = c(22, 17, 16, 14, 10, 9, 7, 5, 3, 2, 26, 23, 18, 18, 16, 13, 12, 10, 10, 7, 6,
                 29, 26, 26, 24, 24, 23, 22, 16, 9, 8, 34, 26, 25, 23, 23, 22, 22, 19, 18, 17, 17, 17,
                 12, 8, 36, 35, 30, 27, 25, 25, 24, 21, 20, 19, 19, 18, 18, 12, 3, 28, 27, 16, 41, 32,
                 27, 19, 32, 25, 25, 46, 38, 34, 33, 27, 20, 44, 37, 32, 28, 52, 46, 37, 42, 41, 38, 35
                 , 53, 48, 40, 40))
knitr::kable(head(regress.data, 91), caption = "Data for Regression", booktabs = T)


```


### Results Overview

```{r echo = F}
ResultsRegression <- matrix(c(23.84, 23.8352, 23.835, 23.8352, 23.835, 23.835,
                           5.42, 5.3993, 5.399, 5.3993, 5.399, 5.399,
                           4.19, 4.1923, 4.192, 4.1923, 4.192, 4.1923), ncol=6, byrow = T)
colnames(ResultsRegression) <- c('By Hand', 'JASP', 'SPSS', 'SAS', 'Minitab', 'R')
rownames(ResultsRegression) <- c('Constant', 'Regression Coefficient', '$\\overline{x}$')
knitr::kable(head(ResultsRegression, 18), caption = "Result Overview Independent Factorial ANOVA", booktabs = T)
```

### By Hand
Calculations by hand can be found in Hays, 1974, pp. 633-635.

Results: 

y' = (5.42)(x - 4.19) + 23.84

**Note:** Hays mean-centered the equation by the mean of $\overline{x}$ = 4.19.

### JASP

```{r RegressionJASP, echo=FALSE, fig.cap="\\label{fig:RegressionJASP}JASP Output for Regression"}
knitr::include_graphics('Screenshots/Regression/RegressionJASP.PNG')
```

```{r RegressionJASPmeans, echo=FALSE, fig.cap="\\label{fig:RegressionJASPmeans}JASP Output for Descriptives"}
knitr::include_graphics('Screenshots/Regression/RegressionJASPmeans.PNG')
```
**Mean-centered regression equation:**

y' = (5.3993)(x - 4.1923)  + 23.8352

### SPSS

```{r eval=F}
DESCRIPTIVES VARIABLES=X
  /STATISTICS=MEAN.


REGRESSION
  /DESCRIPTIVES MEAN STDDEV CORR SIG N
  /MISSING LISTWISE
  /STATISTICS COEFF OUTS R ANOVA
  /CRITERIA=PIN(.05) POUT(.10)
  /NOORIGIN 
  /DEPENDENT Y
  /METHOD=ENTER MeanCenteredX.
  
```

```{r RegressionSPSS, echo=FALSE, fig.cap="\\label{fig:RegressionSPSS}SPSS Output for Regression"}
knitr::include_graphics('Screenshots/Regression/RegressionSPSS.PNG')
```

**Mean-centered regression equation:**

y' = (5.399)(x - 4.192)  + 23.835

### SAS
```{r eval=F}
proc Reg data=Regression;
title "Linear regression";
model Y = MeanCenteredX;
run;
	
PROC MEANS DATA=Regression;
  VAR X Y;
RUN;
```


```{r RegressionSAS, echo=FALSE, fig.cap="\\label{fig:RegressionSAS}SAS Output for Regression"}
knitr::include_graphics('Screenshots/Regression/RegressionSAS.PNG')
```

```{r RegressionSASmeans, echo=FALSE, fig.cap="\\label{fig:RegressionSASmeans}SAS Output for Means"}
knitr::include_graphics('Screenshots/Regression/RegressionSASmeans.PNG')
```

**Mean-centered regression equation:**

y' = (5.3993)(x - 4.1923077)  + 23.83516

### Minitab

```{r RegressionMinitab, echo=FALSE, fig.cap="\\label{fig:RegressionMinitab}Minitab Output for Regression"}
knitr::include_graphics('Screenshots/Regression/RegressionMinitab.PNG')
```

```{r RegressionMinitabmeans, echo=FALSE, fig.cap="\\label{fig:RegressionMinitabmeans}Minitab Output for Means"}
knitr::include_graphics('Screenshots/Regression/RegressionMinitabmeans.PNG')
```
**Mean-centered regression equation:**

y' = (5.399)(x - 4.192)  + 23.835

### R

```{r}
regress.data2 <- read.csv("Datasets/Regression.csv", sep=";")
lm(formula = Y ~ MeanCenteredX, data = regress.data2)
mean(regress.data2$X)
```
**Mean-centered regression equation:**

y' = (5.399)(x - 4.192308)  + 23.835

### Remarks


All differences in results between the software and hand calculation are due to rounding.
